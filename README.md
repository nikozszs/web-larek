# Проектная работа "Веб-ларек"

1 Используемый стек: 

```
HTML, SCSS, TS, Webpack
```

2.1 Установка и запуск

```
npm install
npm run start
```

или

```
yarn
yarn start
```

2.2 Сборка

```
npm run build

или

yarn build

```

3 Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

4 Архитектура приложения

Архитектура проекта разрабатывается с использованием паттерна MVP (Model-View-Presenter), в котором основными слоями являются: 
M - модели данных, отвечающие за работу с данными, 
V - компоненты представления - отвечающие за отображение данных на экране, 
P - презентер в роли EventEmitter, его код не будет выделен в отдельный класс, а будет содержаться в основном скрипте приложения index.ts.


5 Данные и типы данных, используемые в приложении

Карточка

```
interface IProduct {
    id: string,
    title: string,
    price: number,
    image: string,
    category: CategoryStatus,
    description: string,
    totalPrice: number;
}
```

Пользователь

```
interface IUser {
    address: string;
    email: string;
    phone: number;
    payment: string;
}
```

Интерфейс для модели данных карточек

```
interface IProductsData {
    products: IProduct[];
    preview: string | null;
}
```

Модальное окно товара

```
type modalProduct = Pick<IProduct, 'id' | 'image' | 'price' | 'title' | 'description' | 'category'>;
```

Модальное окно корзины

```
type modalBasket = Pick<IProduct, 'id' | 'price' | 'title'>;
```

Модальное окно формы оплаты

```
type modalPayment = Pick<IUser, 'address' | 'payment'>;
```

Модальное окно формы контактов

```
export type modalContacts = Pick<IUser, 'email' | 'payment' | 'phone'>;
```

Модальное окно успешной покупки

```
export type modalSuccess = Pick<IProduct, 'title' | 'totalPrice'>;
```

6 Описание базовых классов

Класс Api имеет следующие свойства и методы.

Методы:

```
handleResponse(response: Response): Promise<object> - обработчик ответа сервера.
get(uri: string) - принимает изменяющеюся часть url-адреса, возвращает ответ от сервера.
post(uri: string, data: object, method: ApiPostMethods = 'POST') - принимает изменяющеюся часть url-адреса, принимает данные в виде объекта для отправки на сервер, type ApiPostMethods = 'POST' | 'PUT' | 'DELETE'.
```

Класс EventEmitter - брокер событий, реализуется от интерфейса от IEvents и имеет следующие методы.

Методы:

```
on - для подписки на событие.
off - для отписки от события.
emit - уведомления подписчиков о наступлении события соответственно.
onAll - для подписки на все события.
offAll - сброса всех подписчиков.
trigger - генерирует заданное событие с заданными аргументами. Это позволяет передавать его в качестве обработчика события в другие классы. Эти классы будут генерировать события, не будучи при этом напрямую зависимыми от класса EventEmitter.
```

7 Описание классов Model, которые позволяют хранить и обрабатывать с сервера и от пользователей



Данные:
пользователь: адрес доставки, емаил, телефон, способ оплаты Действия: ввести доставку, ввести номер и емаил, выбор оплаты, очистка данных
карточка: статус, тайтл, ссылка на картинку, прайс, описание, айди, тотал прайс, Действия: удалить карточку, добавить в корзину, открывать превью карточки
массив карточек: cards - массив(записывать и получать массив), preview(свойсвто, в котором хранится id выбранной карточки в отдельном попапе), действия: удалить каротчку, обновить карточку, получить картоку, checkValidation
ЕСТЬ коллекция карточек, действия: добавить массив карточек с сервера
Пользовательский сценарий: карточка в корзину, из корзины в способ оплаты, ввод данных пользователя
Компоненты: 
1. модальное окно товара(статус, тайтл, описание, прайс, добавиление в корзину, закрытие попапа карточки)
2. модальное окно корзины(тайтл, прайс, оформление заказа, удаление товара, тотал прайс, закрытие попапа)
3. модальное окно формы оплаты(табс, адрес, закрытие попапа)
4. модальное окно формы контактов(емаил, тел, закрытие попапа, переход к оплате)
5. модальное окно успешной покупки(тайтл, тотал прайс, возвращение к гл странице)
6. карточка с данными
7. тех модель состояния
8. гл страница(карточки)

